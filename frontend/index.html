<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>StrikeRadar - USA Strike on Iran Monitor</title>
    <meta name="description" content="Real-time geopolitical risk monitor tracking USA-Iran tension indicators. Live data from news, aviation, and global sentiment.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://backyonatan-alt.github.io/strikeradar/">
    <meta property="og:title" content="StrikeRadar - USA Strike on Iran Probability Monitor">
    <meta property="og:description" content="Real-time geopolitical risk dashboard tracking news intel, aviation activity, and global sentiment for USA-Iran tensions.">
    <meta property="og:image" content="https://backyonatan-alt.github.io/strikeradar/og-image.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://backyonatan-alt.github.io/strikeradar/">
    <meta name="twitter:title" content="StrikeRadar - USA Strike on Iran Probability Monitor">
    <meta name="twitter:description" content="Real-time geopolitical risk dashboard tracking news intel, aviation activity, and global sentiment.">
    <meta name="twitter:image" content="https://backyonatan-alt.github.io/strikeradar/og-image.png">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì°</text></svg>">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JXY7DKJKVK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-JXY7DKJKVK');

        // Custom event tracking helper
        function trackEvent(action, category, label, value) {
            gtag('event', action, {
                'event_category': category,
                'event_label': label,
                'value': value
            });
        }

        // Track page engagement
        let sessionStartTime = Date.now();
        let maxRiskSeen = 0;

        // Track time on page when leaving
        window.addEventListener('beforeunload', () => {
            const sessionDuration = Math.round((Date.now() - sessionStartTime) / 1000);
            trackEvent('session_end', 'engagement', 'session_duration', sessionDuration);
            trackEvent('max_risk_seen', 'engagement', 'highest_risk', maxRiskSeen);
        });

        // Track scroll depth
        let scrollTracked = { 25: false, 50: false, 75: false, 100: false };
        window.addEventListener('scroll', () => {
            const scrollPercent = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
            [25, 50, 75, 100].forEach(threshold => {
                if (scrollPercent >= threshold && !scrollTracked[threshold]) {
                    scrollTracked[threshold] = true;
                    trackEvent('scroll_depth', 'engagement', `scroll_${threshold}`, threshold);
                }
            });
        });
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8033751083492488"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app" id="appContainer">
        <header class="header">
            <div class="logo">üì° StrikeRadar</div>
            <div class="header-right">
                <div class="live-badge"><div class="live-dot"></div>Live</div>
                <a href="https://www.linkedin.com/in/yonatan-back/" target="_blank" rel="noopener" class="contact-link" title="Contact me on LinkedIn">
                    <svg width="14" height="14" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                    Contact
                </a>
                <a href="https://buymeacoffee.com/back.yonatan" target="_blank" rel="noopener" class="contact-link donate-link" title="Support this project">
                    <svg width="14" height="14" viewBox="0 0 24 24"><path d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.241-.152-.143-.196-.366-.231-.572-.065-.378-.125-.756-.192-1.133-.057-.325-.102-.69-.25-.987-.195-.4-.597-.634-.996-.788a5.723 5.723 0 00-.626-.194c-1-.263-2.05-.36-3.077-.416a25.834 25.834 0 00-3.7.062c-.915.083-1.88.184-2.75.5-.318.116-.646.256-.888.501-.297.302-.393.77-.177 1.146.154.267.415.456.692.58.36.162.737.284 1.123.366 1.075.238 2.189.331 3.287.37 1.218.05 2.437.01 3.65-.118.299-.033.598-.073.896-.119.352-.054.578-.513.474-.834-.124-.383-.457-.531-.834-.473-.466.074-.96.108-1.382.146-1.177.08-2.358.082-3.536.006a22.228 22.228 0 01-1.157-.107c-.086-.01-.18-.025-.258-.036-.243-.036-.484-.08-.724-.13-.111-.027-.111-.185 0-.212h.005c.277-.06.557-.108.838-.147h.002c.131-.009.263-.032.394-.048a25.076 25.076 0 013.426-.12c.674.019 1.347.067 2.017.144l.228.031c.267.04.533.088.798.145.392.085.895.113 1.07.542.055.137.08.288.111.431l.319 1.484a.237.237 0 01-.199.284h-.003c-.037.006-.075.01-.112.015a36.704 36.704 0 01-4.743.295 37.059 37.059 0 01-4.699-.304c-.14-.017-.293-.042-.417-.06-.326-.048-.649-.108-.973-.161-.393-.065-.768-.032-1.123.161-.29.16-.527.404-.675.701-.154.316-.199.66-.267 1-.069.34-.176.707-.135 1.056.087.753.613 1.365 1.37 1.502a39.69 39.69 0 0011.343.376.483.483 0 01.535.53l-.071.697-1.018 9.907c-.041.41-.047.832-.125 1.237-.122.637-.553 1.028-1.182 1.171-.577.131-1.165.2-1.756.205-.656.004-1.31-.025-1.966-.022-.699.004-1.556-.06-2.095-.58-.475-.458-.54-1.174-.605-1.793l-.731-7.013-.322-3.094c-.037-.351-.286-.695-.678-.678-.336.015-.718.3-.678.679l.228 2.185.949 9.112c.147 1.344 1.174 2.068 2.446 2.272.742.12 1.503.144 2.257.156.966.016 1.942.053 2.892-.122 1.408-.258 2.465-1.198 2.616-2.657.34-3.332.683-6.663 1.024-9.995l.215-2.087a.484.484 0 01.39-.426c.402-.078.787-.212 1.074-.518.455-.488.546-1.124.385-1.766zm-1.478.772c-.145.137-.363.201-.578.233-2.416.359-4.866.54-7.308.46-1.748-.06-3.477-.254-5.207-.498-.17-.024-.353-.055-.47-.18-.22-.236-.111-.71-.054-.995.052-.26.152-.609.463-.646.484-.057 1.046.148 1.526.22.577.088 1.156.159 1.737.212 2.48.226 5.002.19 7.472-.14.45-.06.899-.13 1.345-.21.399-.072.84-.206 1.08.206.166.281.188.657.162.974a.544.544 0 01-.169.364z"/></svg>
                    Donate
                </a>
                <button class="icon-btn" onclick="showInfo('about')" title="About StrikeRadar">?</button>
            </div>
        </header>

        <div class="timestamp-bar">
            <span>Updated at <span class="time" id="lastUpdate">--:--</span> <span class="tz" id="timezone"></span></span>
            <span style="color: var(--text-muted)" id="nextUpdate">Next update in 30m</span>
        </div>

        <div class="gauge-card">
            <div class="gauge-header">
                <span class="gauge-title" style="margin-bottom: 0;">US Strike on Iran Probability</span>
                <button class="gauge-info-btn" onclick="showInfo('calculation')">i</button>
            </div>
            <div class="gauge-subtitle">Tactical Alert Level</div>
            <div class="status-label low" id="statusLabel">Loading...</div>
            <div class="gauge-container">
                <svg class="gauge-svg" viewBox="0 0 200 115">
                    <defs>
                        <linearGradient id="gradGreen" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#22c55e"/><stop offset="100%" stop-color="#22c55e"/>
                        </linearGradient>
                        <linearGradient id="gradYellow" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#22c55e"/><stop offset="100%" stop-color="#eab308"/>
                        </linearGradient>
                        <linearGradient id="gradOrange" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#22c55e"/><stop offset="50%" stop-color="#eab308"/><stop offset="100%" stop-color="#f97316"/>
                        </linearGradient>
                        <linearGradient id="gradRed" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#22c55e"/><stop offset="33%" stop-color="#eab308"/><stop offset="66%" stop-color="#f97316"/><stop offset="100%" stop-color="#ef4444"/>
                        </linearGradient>
                    </defs>
                    <path class="gauge-track" d="M 20 100 A 80 80 0 0 1 180 100"/>
                    <path class="gauge-fill" id="gaugeFill" d="M 20 100 A 80 80 0 0 1 180 100" stroke="url(#gradGreen)" stroke-dasharray="251.2" stroke-dashoffset="251.2"/>
                </svg>
            </div>
            <div class="gauge-value green" id="gaugeValue">--</div>
            <div class="gauge-window">Projected Risk: Next 8 Hours</div>
        </div>

        <div class="trend-section">
            <div class="trend-header">
                <span class="trend-title">72 Hour Risk Trends</span>
            </div>
            <div class="chart-wrap"><canvas id="trendChart"></canvas></div>
        </div>

        <div class="signals-section">
            <div class="section-title">Data Signals</div>

            <div class="signal-item">
                <div class="signal-icon news">üì∞</div>
                <div class="signal-info">
                    <div class="signal-name">News Intel <span class="signal-status live" id="newsStatus">LIVE</span><button class="info-btn" onclick="showInfo('news')">i</button></div>
                    <div class="signal-detail" id="newsDetail">Loading...</div>
                </div>
                <div class="signal-right">
                    <div class="signal-sparkline" id="newsSparkline"></div>
                    <div class="signal-value" id="newsValue">--</div>
                </div>
            </div>

            <div class="signal-item">
                <div class="signal-icon trends">üìà</div>
                <div class="signal-info">
                    <div class="signal-name">Public Interest <span class="signal-status live" id="trendsStatus">LIVE</span><button class="info-btn" onclick="showInfo('trends')">i</button></div>
                    <div class="signal-detail" id="socialDetail">Loading...</div>
                </div>
                <div class="signal-right">
                    <div class="signal-sparkline" id="socialSparkline"></div>
                    <div class="signal-value" id="socialValue">--</div>
                </div>
            </div>

            <div class="signal-item">
                <div class="signal-icon flight">‚úàÔ∏è</div>
                <div class="signal-info">
                    <div class="signal-name">Civil Aviation <span class="signal-status live" id="flightStatus">LIVE</span><button class="info-btn" onclick="showInfo('aviation')">i</button></div>
                    <div class="signal-detail" id="flightDetail">Loading...</div>
                </div>
                <div class="signal-right">
                    <div class="signal-sparkline" id="flightSparkline"></div>
                    <div class="signal-value" id="flightValue">--</div>
                </div>
            </div>

            <div class="signal-item">
                <div class="signal-icon" style="background: rgba(239, 68, 68, 0.15);">üõ©Ô∏è</div>
                <div class="signal-info">
                    <div class="signal-name">Military Tankers <span class="signal-status live" id="tankerStatus">LIVE</span><button class="info-btn" onclick="showInfo('tanker')">i</button></div>
                    <div class="signal-detail" id="tankerDetail">Loading...</div>
                </div>
                <div class="signal-right">
                    <div class="signal-sparkline" id="tankerSparkline"></div>
                    <div class="signal-value" id="tankerValue">--</div>
                </div>
            </div>

            <div class="signal-item">
                <div class="signal-icon" style="background: rgba(249, 115, 22, 0.15);">üçï</div>
                <div class="signal-info">
                    <div class="signal-name">Pentagon Pizza Meter <span class="signal-status live" id="pentagonStatus">LIVE</span><button class="info-btn" onclick="showInfo('pentagon')">i</button></div>
                    <div class="signal-detail" id="pentagonDetail">Loading...</div>
                </div>
                <div class="signal-right">
                    <div class="signal-sparkline" id="pentagonSparkline"></div>
                    <div class="signal-value" id="pentagonValue">--</div>
                </div>
            </div>

            <div class="signal-item">
                <div class="signal-icon" style="background: rgba(139, 92, 246, 0.15);">üìä</div>
                <div class="signal-info">
                    <div class="signal-name">Market Odds <span class="signal-status live" id="polymarketStatus">LIVE</span><button class="info-btn" onclick="showInfo('polymarket')">i</button></div>
                    <div class="signal-detail" id="polymarketDetail">Loading...</div>
                </div>
                <div class="signal-right">
                    <div class="signal-sparkline" id="polymarketSparkline"></div>
                    <div class="signal-value" id="polymarketValue">--</div>
                </div>
            </div>

            <div class="signal-item">
                <div class="signal-icon weather">üå§Ô∏è</div>
                <div class="signal-info">
                    <div class="signal-name">Op. Conditions <span class="signal-status live" id="weatherStatus">LIVE</span><button class="info-btn" onclick="showInfo('weather')">i</button></div>
                    <div class="signal-detail" id="weatherDetail">Loading...</div>
                </div>
                <div class="signal-right">
                    <div class="signal-sparkline" id="weatherSparkline"></div>
                    <div class="signal-value" id="weatherValue">--</div>
                </div>
            </div>
        </div>

        <div class="feed-section">
            <div class="feed-header">
                <span class="section-title" style="margin-bottom:0">Intelligence Feed</span>
                <span style="font-size: 11px; color: var(--text-muted)" id="feedCount">0 items</span>
            </div>
            <div class="feed-list" id="feedList"></div>
            <button class="show-more-btn" id="showMoreBtn" onclick="toggleFeed()" style="display:none">Show All</button>
        </div>

        <!-- Footer with share, telegram and about -->
        <div style="display: flex; gap: 10px; margin-top: 8px;">
            <button class="show-more-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; gap: 6px;" onclick="shareSnapshot()">
                <span>üì§</span> Share
            </button>
            <a href="https://t.me/StrikeRadarAlerts" target="_blank" class="show-more-btn" style="flex: 1.5; display: flex; align-items: center; justify-content: center; gap: 6px; text-decoration: none; color: inherit;">
                <span>üîî</span> Get Alerts
            </a>
            <button class="show-more-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; gap: 6px;" onclick="showInfo('about')">
                <span>‚ÑπÔ∏è</span> About
            </button>
        </div>

        <!-- Offline indicator -->
        <div id="offlineBar" style="display: none; position: fixed; bottom: 0; left: 0; right: 0; background: var(--orange); color: #000; text-align: center; padding: 8px; font-size: 12px; font-weight: 600;">
            ‚ö†Ô∏è You're offline - showing last available data
        </div>

    </div>

    <!-- Info Modal -->
    <div class="modal-overlay" id="infoModal" onclick="closeInfo(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <span class="modal-title" id="infoTitle">Signal Info</span>
                <button class="modal-close" onclick="closeInfo()">&times;</button>
            </div>
            <div class="modal-body" id="infoBody"></div>
        </div>
    </div>

    <!-- Offline bar -->
    <div id="offlineBar" style="display:none;position:fixed;bottom:0;left:0;right:0;background:#ef4444;color:#fff;text-align:center;padding:8px;font-size:12px;font-weight:600;z-index:999;">‚ö†Ô∏è No internet connection</div>

    <script src="app.js"></script>
</body>
</html>
